(this.webpackJsonplab2=this.webpackJsonplab2||[]).push([[0],{34:function(e,t,n){},46:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var i=n(7),o=n.n(i),c=n(48),r=n.n(c),l=(n(57),n(6)),a=n(28),s=n(17),d=n(43),u=(n(46),n(58),n(59),n(51)),j=(n(60),n(9));var b=function(e){var t="\u2013",n="No priority selected.";1===e.selectedPriority?(t="L",n="Low priority."):2===e.selectedPriority?(t="M",n="Medium priority."):3===e.selectedPriority&&(t="H",n="High priority.");var o=Object(i.useRef)();return Object(i.useEffect)((function(){var t=function(t){e.showDropDown&&o.current&&!o.current.contains(t.target)&&e.onPriorityClicked()};return document.addEventListener("mousedown",t),window.addEventListener("resize",(function(){e.showDropDown&&e.onPriorityClicked()})),function(){document.removeEventListener("mousedown",t),window.removeEventListener("resize",(function(){e.showDropDown&&e.onPriorityClicked()}))}})),Object(j.jsxs)("div",{className:"dropdown",ref:o,children:[e.showDropDown?Object(j.jsx)("button",{"aria-label":n,id:"priority-outline",className:"dropbtn"+e.selectedPriority.toString(),onClick:e.onPriorityClicked,children:t}):Object(j.jsx)("button",{"aria-label":n,className:"dropbtn"+e.selectedPriority.toString(),onClick:e.onPriorityClicked,children:t}),e.showDropDown&&Object(j.jsxs)("div",{className:"dropdown-content",style:{top:e.rowYpos},children:[Object(j.jsxs)("button",{onClick:function(){return e.changePriority(0)},"aria-label":"Priority option: None",className:0===e.selectedPriority?"none-selected":"priority-option",children:["None ",0===e.selectedPriority?Object(j.jsx)("span",{children:"\u2713"}):null]}),Object(j.jsxs)("button",{onClick:function(){return e.changePriority(1)},"aria-label":"Priority option: Low",className:1===e.selectedPriority?"low-selected":"priority-option",children:["Low ",1===e.selectedPriority?Object(j.jsx)("span",{children:"\u2713"}):null]}),Object(j.jsxs)("button",{onClick:function(){return e.changePriority(2)},"aria-label":"Priority option: Medium",className:2===e.selectedPriority?"medium-selected":"priority-option",children:["Medium ",2===e.selectedPriority?Object(j.jsx)("span",{children:"\u2713"}):null]}),Object(j.jsxs)("button",{id:"high-option",onClick:function(){return e.changePriority(3)},"aria-label":"Priority option: High",className:3===e.selectedPriority?"high-selected":"priority-option",children:["High ",3===e.selectedPriority?Object(j.jsx)("span",{children:"\u2713"}):null]})]})]})};var p=function(e){var t=Object(i.useRef)(null),n=Object(i.useState)(e.item_name),o=Object(s.a)(n,2),c=o[0],r=o[1],l=Object(i.useState)(!1),a=Object(s.a)(l,2),d=a[0],p=a[1];return Object(i.useEffect)((function(){e.isNewItem&&t.current.focus(),c==e.item_name||d||r(e.item_name)})),Object(j.jsxs)("div",{id:e.id,className:e.completed?"task-item-completed":"task-item-uncompleted",children:[Object(j.jsx)("input",{"aria-label":"Click or press space bar to check/uncheck item.",onChange:function(){e.onItemChanged(e.id,"completed",!e.completed)},type:"checkbox",className:"check-complete",checked:e.completed}),Object(j.jsx)(u.a,{"aria-label":"Item name text box.",className:"item-name",value:c,onChange:function(e){return r(e.target.value)},disabled:e.completed,onFocus:function(){d||p(!0)},onBlur:function(t){""===t.currentTarget.value&&e.onItemDeleted(e.id),e.isNewItem&&e.changeNewItemId(null),p(!1),e.onItemChanged(e.id,"item_name",t.target.value)},onKeyPress:function(t){if("Enter"===t.key){t.preventDefault();var n=e.onItemAdded();e.changeNewItemId(n)}},ref:t}),Object(j.jsx)(b,{rowYpos:t.current?t.current.getBoundingClientRect().y:0,selectedPriority:e.priority,showDropDown:e.showDropDown,onPriorityClicked:e.onPriorityClicked,changePriority:function(t){e.onItemChanged(e.id,"priority",t),e.onPriorityClicked()}})]})};var m=function(e){var t=Object(i.useState)(null),n=Object(s.a)(t,2),o=n[0],c=n[1],r=Object(i.useState)(null),l=Object(s.a)(r,2),a=l[0],d=l[1];function u(t){return Object(j.jsx)(p,{id:t.id,item_name:t.item_name,completed:t.completed,priority:t.priority,showDropDown:t.id===a,onPriorityClicked:function(){return e=t.id,void d(a===e?null:e);var e},onItemChanged:e.onItemChanged,onItemDeleted:e.onItemDeleted,onItemAdded:e.onItemAdded,isNewItem:t.id===o,changeNewItemId:c},t.id)}var b=Object(j.jsx)("p",{id:"no-items",children:"No items to do."});if(e.data.length>0){var m=e.data.filter((function(e){return e.id!==o}));if("Completed"===e.filterState?m=e.data.filter((function(e){return e.completed})):"Uncompleted"===e.filterState&&(m=e.data.filter((function(e){return!e.completed}))),b=m.map((function(e){return u(e)})),o){var f=e.data.filter((function(e){return e.id===o}));1===f.length&&b.push(u(f[0]))}}return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{id:"item_list",onScroll:function(){return d(null)},children:b}),Object(j.jsx)("button",{"aria-label":"Add a new item to this list.",id:"add",type:"button",onClick:function(){var t=e.onItemAdded();c(t)},children:"+"})]})};n(34);var f=function(e){function t(t){e.onFilterOpClicked(t),e.closeDropUp()}return Object(j.jsxs)("div",{className:"dropup-content",children:[Object(j.jsxs)("button",{onClick:function(){return t("All")},children:["All ","All"===e.filterState?Object(j.jsx)("span",{children:"\u2713"}):null]}),Object(j.jsxs)("button",{onClick:function(){return t("Completed")},children:["Completed ","Completed"===e.filterState?Object(j.jsx)("span",{children:"\u2713"}):null]}),Object(j.jsxs)("button",{onClick:function(){return t("Uncompleted")},children:["Uncompleted ","Uncompleted"===e.filterState?Object(j.jsx)("span",{children:"\u2713"}):null]})]})};var O=function(e){var t=Object(i.useRef)(),n=Object(i.useState)(!1),o=Object(s.a)(n,2),c=o[0],r=o[1];return Object(i.useEffect)((function(){var e=function(e){c&&t.current&&!t.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[c]),Object(j.jsxs)("div",{className:"dropup",children:[Object(j.jsx)("button",{"aria-label":"Filter",className:"accent",id:"filter-dropup",type:"button",onClick:e.onToolClicked,children:Object(j.jsx)("i",{className:"material-icons-outlined md-38",children:"filter_alt"})}),e.showDropUp&&Object(j.jsx)(f,{onFilterOpClicked:e.onFilterOpClicked,filterState:e.filterState,closeDropUp:e.closeDropUp})]})};var h=function(e){function t(t){e.onDeleteOpClicked(t),e.displayModal(),e.closeDropUp()}return Object(j.jsxs)("div",{className:"dropup-content",children:[Object(j.jsxs)("button",{onClick:function(){return t("All")},children:["All ","All"===e.deleteState?Object(j.jsx)("span",{children:"\u2713"}):null]}),Object(j.jsxs)("button",{onClick:function(){return t("Completed")},children:["Completed ","Completed"===e.deleteState?Object(j.jsx)("span",{children:"\u2713"}):null]}),Object(j.jsxs)("button",{onClick:function(){return t("Uncompleted")},children:["Uncompleted ","Uncompleted"===e.deleteState?Object(j.jsx)("span",{children:"\u2713"}):null]})]})};var y=function(e){return Object(j.jsxs)("div",{className:"dropup",children:[Object(j.jsx)("button",{"aria-label":"Delete",className:"accent",id:"delete-dropup",type:"button",onClick:e.onToolClicked,children:Object(j.jsx)("i",{className:"material-icons-outlined md-38",children:"delete_outline"})}),e.showDropUp&&Object(j.jsx)(h,{displayModal:e.displayModal,deleteState:e.deleteState,closeDropUp:e.closeDropUp,onDeleteOpClicked:e.onDeleteOpClicked})]})};n(62);var x=function(e){var t=Object(i.useRef)();function n(t){e.onSortSelected(t),e.toggleDropDown()}return Object(i.useEffect)((function(){var n=function(n){e.showDropDown&&t.current&&!t.current.contains(n.target)&&e.toggleDropDown()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}})),Object(j.jsxs)("div",{className:"sort-dropdown",ref:t,children:[Object(j.jsx)("button",{id:e.showDropDown?"sort-icon-outlined":"sort-icon",onClick:e.toggleDropDown,children:Object(j.jsx)("i",{className:"material-icons-outlined em2",children:"sort"})}),e.showDropDown&&Object(j.jsxs)("div",{className:"sort-dropdown-content",children:[Object(j.jsxs)("button",{onClick:function(){return n("created")},children:["By Date ","created"===e.selectedSortOption?Object(j.jsx)("span",{children:"\u2713"}):null," "]}),Object(j.jsxs)("button",{onClick:function(){return n("item_name")},children:["By Name ","item_name"===e.selectedSortOption?Object(j.jsx)("span",{children:"\u2713"}):null," "]}),Object(j.jsxs)("button",{onClick:function(){return n("priority")},id:"last-option",children:["By Priority ","priority"===e.selectedSortOption?Object(j.jsx)("span",{children:"\u2713"}):null," "]})]})]})};n(63);var v=function(e){return Object(j.jsx)("div",{className:"modal",children:Object(j.jsxs)("div",{className:"modal-content",children:[e.children,Object(j.jsxs)("div",{id:"modal-response",children:[Object(j.jsx)("button",{type:"button",onClick:e.onClose,children:"Cancel"}),Object(j.jsx)("button",{id:"confirm-button",type:"button",onClick:function(){e.onOk(),e.onClose()},children:e.confirm_button_name})]})]})})},C=n(29),g=n(49),D=n(44),w=n(50),k=(n(64),n(32));var S=function(e){var t=Object(i.useRef)(),n=Object(i.useState)(0),o=Object(s.a)(n,2),c=o[0],r=o[1],l=Object(k.useMediaQuery)({minWidth:992});function a(t){!(e.list_data.length>e.maxToDisplay)||0===c&&t<0||c===e.list_data.length-e.maxToDisplay&&t>0||r(c+t)}function d(){if(l||!e.collapsed){var t=e.onListAdded();e.onListSelected(t),e.list_data.length>e.maxToDisplay&&r(e.list_data.length-e.maxToDisplay+1)}}function u(t,n){t.stopPropagation(),e.curr_list_id===n&&e.onListSelected("default-list"),e.onListDeleted(n),a(-1)}Object(i.useEffect)((function(){var n=function(n){e.collapsed||!t.current||t.current.contains(n.target)||e.setCollapseState(!0)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}));var b=e.list_data.slice(c,c+e.maxToDisplay);return Object(j.jsx)(C.c,{collapsed:e.collapsed,onClick:function(){l||e.setCollapseState(!1)},ref:t,children:Object(j.jsxs)(C.a,{iconShape:"square",children:[Object(j.jsx)(C.b,{"aria-label":"Add a new list",id:"add-new-list",icon:Object(j.jsx)(g.a,{}),onKeyPress:function(e){"Enter"===e.key&&d()},onClick:function(){return d()},children:"New List"}),Object(j.jsx)(C.b,{"aria-label":"Scroll Up",id:"scroll-up",onKeyPress:function(e){"Enter"===e.key&&a(-1)},onClick:function(){return a(-1)},children:Object(j.jsx)(D.b,{})}),b.map((function(t){return Object(j.jsxs)(C.b,{"aria-label":"View this list",id:t.id,onKeyPress:function(n){"Enter"===n.key&&(!l&&e.collapsed||e.onListSelected(t.id))},onClick:function(){!l&&e.collapsed||e.onListSelected(t.id)},children:[t.list_name," ","default-list"!==t.id&&(l||!e.collapsed)&&Object(j.jsx)("span",{"aria-label":" ",children:Object(j.jsx)(w.a,{"aria-label":"Delete this list",tabIndex:"0",onKeyPress:function(e){"Enter"===e.key&&u(e,t.id)},onClick:function(e){return u(e,t.id)}})})]})})),Object(j.jsx)(C.b,{"aria-label":"Scroll down",id:"scroll-down",onKeyPress:function(e){"Enter"===e.key&&a(1)},onClick:function(){return a(1)},children:Object(j.jsx)(D.a,{})})]})})},_=n(52);var P=function(e){var t=e.value,n=e.onChange,o=Object(_.a)(e,["value","onChange"]),c=Object(i.useState)(null),r=Object(s.a)(c,2),l=r[0],d=r[1],u=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e=u.current;e&&e.setSelectionRange(l,l)}),[u,l,t]),Object(j.jsx)("input",Object(a.a)({ref:u,value:t,onChange:function(e){d(e.target.selectionStart),n&&n(e)}},o))};var N=function(e){return Object(j.jsx)(P,{type:"text",id:"list_header","aria-label":"To-Do list name. To edit, press arrow key before typing.",value:e.curr_list_name,disabled:"default-list"===e.curr_list_id,onChange:function(t){return e.onListNameChanged(e.curr_list_id,t.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),e.target.blur())}})};var L=function(e){var t=Object(i.useState)(null),n=Object(s.a)(t,2),o=n[0],c=n[1],r=Object(i.useState)("All"),l=Object(s.a)(r,2),d=l[0],u=l[1],b=Object(i.useState)(null),p=Object(s.a)(b,2),f=p[0],h=p[1],C=Object(i.useState)(!0),g=Object(s.a)(C,2),D=g[0],w=g[1],_=Object(i.useState)(null),P=Object(s.a)(_,2),L=P[0],I=P[1],E=Object(i.useState)(!1),A=Object(s.a)(E,2),U=A[0],T=A[1],B=Object(k.useMediaQuery)({maxWidth:600}),M=Object(k.useMediaQuery)({orientation:"landscape"}),F=Object(k.useMediaQuery)({minWidth:992});function R(e){c(o===e?null:e)}var K=Object(i.useRef)();Object(i.useEffect)((function(){var e=function(e){o&&K.current&&!K.current.contains(e.target)&&c(null)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[o]);var z=e.data.length;"Completed"===f?z=e.data.filter((function(e){return e.completed})).length:"Uncompleted"===f&&(z=e.data.filter((function(e){return!e.completed})).length);var Y=4;return B&&!M?Y=10:F&&(Y=12),Object(j.jsxs)("div",{id:"overall-app",children:[Object(j.jsx)(S,{list_data:e.list_data,curr_list_id:e.curr_list_id,onListSelected:e.onListSelected,onListAdded:e.onListAdded,onListDeleted:e.onListDeleted,collapsed:D,setCollapseState:w,maxToDisplay:Y}),Object(j.jsxs)("div",{id:"content",children:[Object(j.jsx)(N,{className:"accent",curr_list_id:e.curr_list_id,curr_list_name:e.curr_list_name,onListNameChanged:e.onListNameChanged}),e.data.length>0&&Object(j.jsx)(x,{showDropDown:U,toggleDropDown:function(){return T(!U)},onSortSelected:e.onSortSelected,selectedSortOption:e.selectedSortOption}),e.data.length>0&&Object(j.jsxs)("div",{id:"column-labels",children:[Object(j.jsx)("span",{id:"checkbox-label",children:"\u2713"})," ",Object(j.jsx)("span",{id:"item-name-label",children:"Item Name"})," ",Object(j.jsx)("span",{id:"priority-label",children:"Priority"})]}),Object(j.jsx)(m,Object(a.a)(Object(a.a)({},e),{},{filterState:d})),Object(j.jsxs)("div",{id:"tools",ref:K,children:[Object(j.jsx)(O,{onToolClicked:function(){R("filter")},showDropUp:"filter"===o,onFilterOpClicked:function(e){return u(e)},filterState:d,closeDropUp:function(){return c(null)}}),Object(j.jsx)(y,{onToolClicked:function(){R("delete")},showDropUp:"delete"===o,deleteState:f,onDeleteOpClicked:function(e){return h(e)},closeDropUp:function(){return c(null)},displayModal:function(){I(!0)}})]}),L&&Object(j.jsx)(v,{confirm_button_name:"Delete",onClose:function(){h(null),I(!1)},onOk:function(){e.onDeleteByCategory(f),c(null)},children:Object(j.jsxs)("p",{children:["Are you sure that you want to delete ",Object(j.jsxs)("b",{children:["all ",z.toString()," ","All"!==f?f.toLowerCase()+" ":""," "]}),"tasks?"]})})]})]})},I=n(41),E=n(45);I.a.initializeApp({apiKey:"AIzaSyCYBi2G8RnkLs2Bzj_XDLjYPylF2oRhq5Y",authDomain:"cs124-lab-celine-yuki.firebaseapp.com",projectId:"cs124-lab-celine-yuki",storageBucket:"cs124-lab-celine-yuki.appspot.com",messagingSenderId:"2120607993",appId:"1:2120607993:web:d5d647b2b43f3c7fd95a28"});var A=I.a.firestore(),U="todo-lists";var T=function(e){var t=Object(i.useState)("created"),n=Object(s.a)(t,2),o=n[0],c=n[1],r=A.collection(U),u=Object(E.a)(r),b=Object(s.a)(u,3),p=b[0],m=(b[1],b[2],[]);p&&(m=p.docs.map((function(e){return Object(a.a)({},e.data())})));var f=Object(i.useState)("default-list"),O=Object(s.a)(f,2),h=O[0],y=O[1],x=A.collection(U).doc(h).collection("list-of-items");o&&(x="priority"===o?x.orderBy(o,"desc").orderBy("item_name"):x.orderBy(o));var v=Object(E.a)(x),C=Object(s.a)(v,3),g=C[0],D=(C[1],C[2],[]);g&&(D=g.docs.map((function(e){return Object(a.a)({},e.data())})));var w="";return m.length>0&&m.filter((function(e){return e.id===h})).length>0&&(w=m.filter((function(e){return e.id===h}))[0].list_name),Object(j.jsx)(L,{data:D,list_data:m,curr_list_id:h,curr_list_name:w,onItemChanged:function(e,t,n){A.collection(U).doc(h).collection("list-of-items").doc(e).update(Object(l.a)({},t,n))},onItemDeleted:function(e){A.collection(U).doc(h).collection("list-of-items").doc(e).delete()},onDeleteByCategory:function(e){g.forEach((function(t){"Completed"===e&&t.data().completed?t.ref.delete():"Uncompleted"!==e||t.data().completed?"All"===e&&t.ref.delete():t.ref.delete()}))},onItemAdded:function(){var e=Object(d.a)();return A.collection(U).doc(h).collection("list-of-items").doc(e).set({id:e,item_name:"",completed:!1,priority:0,created:I.a.firestore.Timestamp.fromDate(new Date)}),e},onSortSelected:function(e){return c(e)},onListSelected:y,onListNameChanged:function(e,t){A.collection(U).doc(e).update({list_name:t})},onListAdded:function(){var e=Object(d.a)();return A.collection(U).doc(e).set({id:e,list_name:"Untitled"}),e},onListDeleted:function(e){A.collection(U).doc(e).delete()},selectedSortOption:o})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),i(e),o(e),c(e),r(e)}))};r.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(T,{initialData:[]})}),document.getElementById("root")),B()}},[[67,1,2]]]);
//# sourceMappingURL=main.d3608c5b.chunk.js.map